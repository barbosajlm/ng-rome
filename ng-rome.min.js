"use strict";function NgRome(a){var b=a,c=function(a,b){var c={};for(var d in a)c[d]=a[d];for(var e in b)c[e]=b[e];return c};this.getOptions=function(){return b},this.setOptions=function(a){for(var c in a)b[c]=a[c]},this.Rome=function(a,d){this.element=a,this.options=c(b,d)}}function romeProvider(){var a=this,b={};a.setOption=function(c,d){return b[c]=d,a},a.setMultipleOptions=function(c){for(var d in c)b[d]=c[d];return a},a.$get=function(){return new NgRome(b)}}function romeService(a){var b=this,c=[];b.newRome=function(b,d){var e=rome.find(b),f=new a.Rome(b,d);return e?e.restore(f.options):(e=rome(b,f.options),c.push(e)),c.forEach(function(a){a.refresh()}),e},b.destroyRome=function(a){var b=-1,d=c.filter(function(c,d){return c.associated===a?(b=d,!0):!1});c.splice(b,-1),d[0].destroy()}}function romeDirective(a){function b(b,d){a.newRome(d[0].childNodes[0],b.options).on("data",function(){b.$evalAsync(c(b,d))})}function c(a,b){a.ngModel=rome.find(b[0].childNodes[0]).getDateString()}var d;return{restrict:"AE",template:function(a,b){d="rome_"+b.id;var c=b.romeInline?'<div id="'+d+'"></div>':'<input id="'+d+'"/>';return c},scope:{options:"=?romeOptions",romeInline:"=romeInline",ngModel:"=ngModel"},link:function(c,d,e){c.$watch("ngModel",function(){c.options=c.options?c.options:{},c.options.initialValue=rome.find(d[0].childNodes[0])?"":c.ngModel,b(c,d)}),c.$on("$destroy",function(){a.destroyRome(d[0].childNodes[0])})}}}angular.module("ng-rome",[]).provider("$rome",romeProvider).service("RomeService",["$rome",romeService]).directive("ngRome",["RomeService",romeDirective]);